## 1610. Maximum Number of Visible Points
```swift
def visiblePoints(self, points: List[List[int]], angle: int, location: List[int]) -> int:
        def ang(a, b, c):
            ang = math.degrees(math.atan2(a[1] - b[1], a[0] - b[0]) - math.atan2(c[1] - b[1], c[0] - b[0]))
            return ang + 360 if ang < 0 else ang
        
        ref, key, ags = [101, 0], 0, []

        for p in points:
            if p == location:
                key += 1
            else:
                ags.append(ang(p, location, ref))
                
        ags.sort()
        ags.extend([360 + x for x in ags])
        ans, n = 0, len(ags)
        for i in range(n - 1):
            j = bisect.bisect_right(ags, ags[i] + angle)
            ans = max(ans, min(n // 2, j - i))

        return ans + key
```
